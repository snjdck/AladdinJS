"use strict";
/* buffer format => left2right, bottom2top */
function readColorData(ba, position, width, height, bitPerPixel, right2left, top2bottom){
	let pixelCount = width * height;
	let buffer = [];
	for(let i=0; i<pixelCount; ++i){
		let x = i % width;
		let y = Math.floor(i / width);
		if(right2left){
			x = width  - 1 - x;
		}
		if(top2bottom){
			y = height - 1 - y;
		}
		let offset = (width * y + x) * (bitPerPixel >> 3);
		if(bitPerPixel >= 24)
		buffer[offset+2] = ba.readUInt8(position++);//b
		if(bitPerPixel >= 16)
		buffer[offset+1] = ba.readUInt8(position++);//g
		if(bitPerPixel >= 8)
		buffer[offset  ] = ba.readUInt8(position++);//r
		if(bitPerPixel == 32)
		buffer[offset+3] = ba.readUInt8(position++);//a
	}
	let data = new Uint8Array(buffer);
	return {width, height, bitPerPixel, data};
}

module.exports = {
	readColorData
};