
function cast(xml){
	let json = Object.create(null);
	for(let attr of xml.attributes){
		json[attr.name] = attr.value;
	}
	for(let node of xml.childNodes){
		if(node.nodeType === 3){
			json[node.nodeName] = node.data;
			continue;
		}
		let nodeName = node.localName;
		let nodeData = cast(node);
		if(!(nodeName in json)){
			json[nodeName] = nodeData;
		}else if(Array.isArray(json[nodeName])){
			json[nodeName].push(nodeData);
		}else{
			json[nodeName] = [json[nodeName], nodeData];
		}
	}
	return json;
}

export default cast;