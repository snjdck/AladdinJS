'use strict';

const crc32 = function(){
	const table = Array.from(function*(){
		for(let i=0; i<256; ++i){
			let v = i;
			for(let j=0; j<8; ++j){
				v = v & 1 ? v >>> 1 ^ 0xEDB88320 : v >>> 1;
			}
			yield v;
		}
	}());
	return (value, seed) => ~value.reduce((c, v) => c >>> 8 ^ table[(c ^ v) & 0xFF], ~seed);
}();

const crc16 = function(){
	const table = Array.from(function*(){
		for(let i=0; i<256; ++i){
			let v = i;
			for(let j=0; j<8; ++j){
				v = v & 1 ? v >>> 1 ^ 0xA001 : v >>> 1;
			}
			yield v;
		}
	}());
	return (value, seed) => value.reduce((c, v) => c >>> 8 ^ table[(c ^ v) & 0xFF], ~seed & 0xFFFF);
}();

exports.crc32 = crc32;
exports.crc16 = crc16;
