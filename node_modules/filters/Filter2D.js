"use strict";

class Filter2D
{
	draw(gl, target){
		gl.render2d.submit();
		gl.render2d.save(gl.FRAMEBUFFER_BINDING, gl.CURRENT_PROGRAM);
		
		let imageFrameBuffer = gl.renderTargetMgr.getOut();
		imageFrameBuffer.active(gl);
		gl.clearColor(0, 0, 0, 0);
		gl.clear(gl.COLOR_BUFFER_BIT);
		target.onDraw(gl);
		gl.render2d.submit();

		gl.bindTexture(gl.TEXTURE_2D, imageFrameBuffer.colorBuffer);
		this.onDraw(gl);

		gl.render2d.load(gl.CURRENT_PROGRAM);
/*
		let filterFrameBuffer = gl.renderTargetMgr.getOut();
		filterFrameBuffer.active(gl);
		gl.clearColor(0, 0, 0, 0);
		gl.clear(gl.COLOR_BUFFER_BIT);

		let program = gl.programMgr.fetch(this.shader);
		gl.useProgram(program);

		gl.bindTexture(gl.TEXTURE_2D, imageFrameBuffer.colorBuffer);
		//drawFilter();
		gl.bindFramebuffer(gl.FRAMEBUFFER, currentFrameBuffer);
*/
		gl.renderTargetMgr.putIn(imageFrameBuffer);
		//gl.render2d.invalidate();
	}

	onDraw(gl){}
}

module.exports = Filter2D;