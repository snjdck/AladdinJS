const Quaternion = require("./Quaternion");
const Vector3D = require("./Vector3D");

const tempVector = new Vector3D();

class Matrix44
{
	constructor(){
		this.rotation = new Quaternion();
		this.translation = new Vector3D();
	}

	identity(){
		this.translation.setTo(0, 0, 0);
		this.rotation.setTo(0, 0, 0, 1);
	}
	
	copyFrom(source){
		this.translation.copyFrom(source.translation);
		this.rotation.copyFrom(source.rotation);
	}
	
	prepend(other, result){
		this.rotation.rotateVector(other.translation, tempVector);
		this.translation.add(tempVector, result.translation);
		this.rotation.prepend(other.rotation, result.rotation);
	}
	
	invert(){
		this.rotation.negate();
		this.rotation.rotateVector(this.translation, this.translation);
		this.translation.negate();
	}
}

module.exports = Matrix44;