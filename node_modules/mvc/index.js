
import Notifier from './src/Notifier';
import {ReactApplication, ViewComponent} from './src/react';

function startupReactApplication(element, container, ...moduleMetaList){
	moduleMetaList.reduce((app, mod) => app.regModule(mod), new ReactApplication()).startup(element, container);
}

export const Model = Notifier();
export const Service = Notifier();
export const Controller = Notifier();
export * from 'ioc';
export {default as MsgName} from './src/MsgName';
export {
	ViewComponent,
	startupReactApplication
}
export function ModuleMeta(meta){
	return Object.assign({
		name: '',
		models:[],
		services:[],
		controllers:[],
		plugins:[],
		message:{
			interested:[],
			dispatched:[]
		}
	}, meta);
}

Controller.SubClass = function(id, injectProps){
	const Sub = class extends this {};
	Object.defineProperty(Sub, 'id', {value: id});
	if(injectProps){
		Object.defineProperty(Sub, InjectTag, {value: injectProps});
	}
	return Sub;
}