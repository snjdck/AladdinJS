'use strict';

class Signal {
	constructor(){
		this._handlerMap = new Map();
	}

	add(handler, once=false){
		this._handlerMap.set(handler, once);
		return handler;
	}

	remove(handler){
		this._handlerMap.delete(handler);
	}

	has(handler){
		return this._handlerMap.has(handler);
	}

	notify(...args){
		for(let [handler, once] of this._handlerMap.entries()){
			if(once)this.remove(handler);
			handler(...args);
		}
	}
}

module.exports = Signal;
