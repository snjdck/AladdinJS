/*
t = dx / (speed * cos)
speed * sin * t - 0.5 * G * t * t = dy

dx * tan - 0.5 * G * dx * dx / (speed * speed * cos * cos) = dy

2 * sin * cos * dx - 2 * cos * cos * dy = G * dx * dx / (speed * speed)
sin@ * dx - cos@ * dy = G * dx * dx / (speed * speed) + dy

sin(a-b) = (G * dx * dx / (speed * speed) + dy) / sqrt(dx*dx+dy*dy)
tan(b) = dy / dx
*/

const g = 9.18;
function* bulletTrack(pa, pb, speed){
	const dy = pb.y - pa.y;
	const dx = pb.x - pa.x;
	const a = Math.asin((g * dx * dx / (speed * speed) + dy) / Math.hypot(dx, dy));
	const b = Math.atan2(dy, dx);
	yield 0.5 * (b + a);
	yield 0.5 * (b - a + Math.PI);
}

exports.bulletTrack = bulletTrack;
