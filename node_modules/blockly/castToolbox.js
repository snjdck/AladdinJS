
function castBlock(item, type='block'){
	let result = [];
	result.push(`<${type} type="${item.type}">`);
	if(item.fields){
		for(let [k, v] of Object.entries(item.fields)){
			result.push(`<field name="${k}">${v}</field>`);
		}
	}
	if(item.inputs){
		for(let [k, v] of Object.entries(item.inputs)){
			let block = castBlock(v.block || v.shadow, v.block ? 'block' : 'shadow')
			result.push(`<value name="${k}">${block}</value>`);
		}
	}
	result.push(`</${type}>`);
	return result.join('');
}

function castToolbox(contents){
	let result = [];
	for(let item of contents){
		if(item.kind == 'label'){
			result.push(`<label text="${item.text}"/>\n`);
		}else if(item.kind == 'block'){
			result.push(castBlock(item) + '\n');
		}
	}
	return result.join('');
}

exports.castBlock = castBlock;
exports.castToolbox = castToolbox;
