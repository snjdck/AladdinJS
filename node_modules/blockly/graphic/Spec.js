"use strict";

const regExp = /%\{([\w,]+)\}/g;

function parse(input){
	let begin = 0;
	let result = [];
	for(;;){
		let info = regExp.exec(input);
		let end = info ? info.index : input.length;
		if(begin < end){
			result.push({type:"label", "value":input.slice(begin, end)});
		}
		if(!info)break;
		begin = info.index + info[0].length;
		let data = info[1].split(",").map(v => v.trim());
		result.push({"type":data[0], "valueType":data[1], "name":data[2], "value":data[3]});
	}
	return result;
}

exports.parse = parse;
