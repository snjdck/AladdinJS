"use strict";

const RenderTarget = require("./RenderTarget");

class MouseRenderTarget extends RenderTarget{
	onDispose(gl){
		gl.deleteRenderbuffer(this.colorBuffer);
		gl.deleteRenderbuffer(this.depthBuffer);
		this.colorBuffer = null;
		this.depthBuffer = null;
	}

	onCreate(gl){
		this.colorBuffer = gl.createRenderbuffer();
		this.depthBuffer = gl.createRenderbuffer();
		
		gl.bindRenderbuffer(gl.RENDERBUFFER, this.colorBuffer);
		gl.renderbufferStorage(gl.RENDERBUFFER, gl.RGBA8, this.width, this.height);
		gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthBuffer);
		gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, this.width, this.height);
		gl.bindRenderbuffer(gl.RENDERBUFFER, null);

		this.attachRenderbuffer(gl.COLOR_ATTACHMENT0, this.colorBuffer);
		this.attachRenderbuffer(gl.DEPTH_STENCIL_ATTACHMENT, this.depthBuffer);
	}
}

module.exports = MouseRenderTarget;