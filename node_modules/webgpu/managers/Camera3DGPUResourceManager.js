'use strict';

const Vulkan = require('../Vulkan');
const ObjectCache = require('utils/ObjectCache');
const BufferBindGroup = require('../helper/BufferBindGroup');

function Camera3DGPUResourceManager(){
	const cache = new ObjectCache(() => new BufferBindGroup([
			[GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST, 7 * 4 * 4],
		], buffer => [
			['0', {buffer}, Vulkan.getSampler('linear_repeat')],
			['2', {buffer}],
		], ['uniformBuffer'], ['mvpBindGroup', 'cullBindGroup']
	));
	return {
		onFrameBegin: () => cache.putAllIn(),
		getOut: () => cache.getOut(),
	}
}

module.exports = Camera3DGPUResourceManager;
