'use strict';

const Vulkan = require('../Vulkan');

function build(bindGroupLayoutDescDict){
	return Object.fromEntries(
		Object.entries(bindGroupLayoutDescDict).map(
			([k, v]) => [k, Vulkan.device.createBindGroupLayout(v)]
		)
	);
}

module.exports = function(){
	const bindGroupLayoutDescDict = {};

	bindGroupLayoutDescDict.bindGroupLayout = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.VERTEX,
			buffer: {}
		},{binding: 1,
			visibility: GPUShaderStage.FRAGMENT,
			sampler: {}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayout2 = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.VERTEX | GPUShaderStage.COMPUTE,
			buffer: {}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayout2Dynamic = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.VERTEX,
			buffer: {hasDynamicOffset: true}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayout3 = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.FRAGMENT,
			texture: {}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayout4 = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.FRAGMENT,
			buffer: {hasDynamicOffset: true}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayout5 = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.FRAGMENT,
			texture: {viewDimension: '2d-array'}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayoutCull = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.COMPUTE,
			buffer: {type: 'storage'}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayoutFilter2D = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.FRAGMENT,
			sampler: {}
		},{
			binding: 1,
			visibility: GPUShaderStage.FRAGMENT,
			texture: {}
		}]
	};

	bindGroupLayoutDescDict.bindGroupLayoutFilterBlur = {
		entries:[{
			binding: 0,
			visibility: GPUShaderStage.VERTEX,
			buffer: {}
		},{
			binding: 1,
			visibility: GPUShaderStage.FRAGMENT,
			buffer: {}
		}]
	};

	return build(bindGroupLayoutDescDict);
}
