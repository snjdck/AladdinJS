'use strict';

const Vulkan = require('../Vulkan');
const {FrameBuffer} = require('../helper/FrameBuffer');

const drawScene3D = function(){
	const frameBuffer = new FrameBuffer(true, [0,0,0,1]);
	function renderFn(){
		Vulkan.cameraMgr.collectDrawUnits(this.camera, this);
		Vulkan.cameraMgr.draw();
	}
	return function(root){
		frameBuffer.setColorAttachment(Vulkan.mainColorTexture);
		frameBuffer.setDepthStencilAttachment(Vulkan.mainDepthStencil);
		frameBuffer.render(renderFn, root);
	}
}();

module.exports = drawScene3D;
