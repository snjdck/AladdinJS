'use strict';

const DisplayObject = require('./DisplayObject');
const Mat3x4 = require('./mat3x4');

class DisplayObject3D extends DisplayObject
{
	constructor(){
		super(Mat3x4);
		this.layerFlag = 0xFFFFFFFF;
	}

	get worldTransform(){
		return this.isTransformStatic ? this.transform : this._worldMatrix;
	}

	addChild(child){
		if(child.parent){
			if(child.parent === this){
				return child;
			}
			child.parent.removeChild(child);
		}

		this.children.push(child);
		return super.addChild(child);
	}

	removeChild(child){
		if(this.hasChild(child)){
			const {children} = this;
			children.splice(children.indexOf(child), 1);
			return super.removeChild(child);
		}
		return child;
	}
}

module.exports = DisplayObject3D;
