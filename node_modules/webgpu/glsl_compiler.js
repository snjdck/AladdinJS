'use strict';

let glslang;

exports.init = async function(){
	const glslangModule = await import('https://unpkg.com/@webgpu/glslang@0.0.7/web/glslang.js');
	glslang = await glslangModule.default();
}

exports.compile = function(mod){
	let vertexCode = glslang.compileGLSL(mod.vertexCode, "vertex");
	let fragmentCode = glslang.compileGLSL(mod.fragmentCode, "fragment");
	return {vertexCode, fragmentCode};
}