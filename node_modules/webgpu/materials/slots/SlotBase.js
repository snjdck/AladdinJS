'use strict';

const Vulkan = require('../../Vulkan');

const {delayNew} = require('utils/cache');

module.exports = factory => bindIndex => delayNew(() => {
	const slot = factory();
	Vulkan.events.addEventListener('update', () => slot.clear());
	return slot;
})().bind(bindIndex);
