'use strict';

const Vulkan = require('../../Vulkan');

const {delayNew} = require('utils/cache');

module.exports = factory => {
	const getSlot = delayNew(() => {
		const slot = factory();
		Vulkan.events.addEventListener('update', () => slot.clear());
		return slot;
	});
	return bindIndex => getSlot().bind(bindIndex);
}
