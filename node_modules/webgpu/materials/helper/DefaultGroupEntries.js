
const maxCountPerDraw = 100;

module.exports = {
	maxCountPerDraw,
	worldMatrixList: function(){
		const temp = {array: new Float32Array(12 * maxCountPerDraw), stride: 12, mapFn: v => v.entity.worldTransform.rawData};
		return () => ({name:'worldMatrixList', type:`array<mat3x4<f32>, ${maxCountPerDraw}>`, visibility:GPUShaderStage.VERTEX, binding:0, buffer:{}, temp});
	}(),
	animationTextureInfo: function(){
		const temp = {array: new Float32Array(4 * maxCountPerDraw), stride: 4, mapFn: v => [v.animationTime ?? 0, v.animationIndex ?? 0]};
		return () => ({name:'animationTextureInfo', type:`array<vec4<f32>, ${maxCountPerDraw}>`, visibility:GPUShaderStage.VERTEX, binding:2, buffer:{}, temp});
	}(),
	animationTexture: function(){
		return {name:'animationTexture', visibility:GPUShaderStage.VERTEX, binding:1, texture:{viewDimension: '2d-array', sampleType:'unfilterable-float'}};
	},
};
