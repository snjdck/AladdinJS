'use strict';

const TextureMaterial = require('./TextureMaterial');
/*
const pipeline = {
	...TextureMaterial.pipelineDesc,
	fragment: {
		...TextureMaterial.pipelineDesc.fragment,
		targets:[{
			format: 'bgra8unorm',
			blend: {
				color:{srcFactor: 'src-alpha', dstFactor: 'one-minus-src-alpha', operation: 'add'},
				alpha:{srcFactor: 'src-alpha', dstFactor: 'one-minus-src-alpha', operation: 'add'}
			}
		}],
	},
	depthStencil: {
		...TextureMaterial.pipelineDesc.depthStencil,
		depthWriteEnabled: false,
	}
};
*/
const pipeline = TextureMaterial.pipeline.clone({
	targets:() => [{
		format: 'bgra8unorm',
		blend: {
			color:{srcFactor: 'src-alpha', dstFactor: 'one-minus-src-alpha', operation: 'add'},
			alpha:{srcFactor: 'src-alpha', dstFactor: 'one-minus-src-alpha', operation: 'add'}
		}
	}],
	depthStencil:{
		depthWriteEnabled: false
	}
}).desc;

class AlphaTextureMaterial extends TextureMaterial.Subclass(pipeline){
	static order = 1;
}

module.exports = AlphaTextureMaterial;
