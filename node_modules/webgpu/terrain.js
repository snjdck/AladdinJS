'use strict';

const {createMeshIndices} = require('utils/geometry');
const {initMesh} = require('./helper/MeshHelper');

module.exports = async function(){
	const indexData = new Uint16Array(createMeshIndices(vertexCountX, vertexCountY));
	const mesh = {
		name: 'terrain',
		subMeshList: [
			{vertexCount, attributes:{
				index: indexData,
			}}
		]
	};
	return initMesh(mesh);
}

const bytePerVertex = 12;
const vertexCountX = 256;
const vertexCountY = 256;
const vertexCount = vertexCountX * vertexCountY;
const indexCount = (vertexCountX - 1) * (vertexCountY - 1) * 2 * 3;//exery rect has 2 triangle, every triangle has 3 index.
const vertexDataLength = vertexCount * bytePerVertex;
