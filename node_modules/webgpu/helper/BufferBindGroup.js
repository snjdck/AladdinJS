'use strict';

const Vulkan = require('../Vulkan');
const defineConstGetter = require('utils/object/defineConstGetter');

class BufferBindGroup
{
	constructor(bufferArgList, bindGroupFactory, bufferAlias, bindGroupAlias){
		defineConstGetter(this, '_bufferList', () => bufferArgList.map(v => Vulkan.createBuffer(...v)));
		defineConstGetter(this, '_bindGroupList', () => bindGroupFactory(...this._bufferList).map(v => Vulkan.createBindGroup(...v)));
		bufferAlias?.forEach((name, index) => name && defineConstGetter(this, name, () => this.getBuffer(index)));
		bindGroupAlias?.forEach((name, index) => name && defineConstGetter(this, name, () => this.getBindGroup(index)));
	}

	getBuffer(index=0){
		return this._bufferList[index];
	}

	getBindGroup(index=0){
		return this._bindGroupList[index];
	}
}

module.exports = BufferBindGroup;
