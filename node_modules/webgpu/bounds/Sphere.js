'use strict';

const Vector3D = require('../../math/Vector3D');

class Sphere
{
	constructor(){
		this.center = new Vector3D();
		this.radius = 0;
	}

	hitTest(other){
		return other.hitTestSphere(this);
	}

	hitTestSphere(other){
		this.center.subtract(other.center, ab);
		const totalRadius = this.radius + other.radius;
		return ab.lengthSquared < totalRadius * totalRadius;
	}

	hitTestAABB(other){
		const {center, radius} = this;
		if(other.containsPt(center))return true;
		const {minX, minY, minZ, maxX, maxY, maxZ} = other;
		other.closestPoint(center, ab);
		ab.subtract(center);
		return ab.lengthSquared < radius * radius;
	}
}

const ab = new Vector3D();

module.exports = Sphere;
