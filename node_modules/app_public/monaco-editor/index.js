
let div = document.createElement('div');
document.body.appendChild(div);

let code = `#include<Arduino.h>\n\nvoid setup(){\n}\n\nvoid loop(){\n}`;
let editor = monaco.editor.create(div, {value:code, language:'cpp'});

window.addEventListener('resize', () => editor.layout());

function handleMsg(handler){
	window.addEventListener('message', async evt => {
		const {type, data} = evt.data;
		evt.source.postMessage({type, data: await handler[type](data)});
	});
}

handleMsg({getCode(){
	return editor.getValue();
}});