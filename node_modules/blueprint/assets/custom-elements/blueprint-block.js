const text = `
<style>
blueprint-block {
	> :is([slot="input"], [slot="output"]) {
		display: flex;
		align-items: baseline;
		user-select: none;
	}

	> [slot="input"]::before, > [slot="output"]::after {
		width: 20px;
		height: 12px;
		content: '';
		background-color: white;
		margin: 2px;
	}

	> [slot="input"]::before {
		mask-image: url(assets/icon-expression.svg);
	}

	> [slot="input"][data-connected="1"]::before {
		mask-image: url(assets/icon-expression-connected.svg);
	}

	> [slot="input"][data-statement="1"][data-connected="1"]::before {
		mask-image: url(assets/icon-input-statement-connected.svg);
	}

	> [slot="input"][data-statement="1"]::before {
		mask-image: url(assets/icon-input-statement.svg);
	}

	> [slot="output"]::after {
		mask-image: url(assets/icon-expression.svg);
	}

	> [slot="output"][data-connected="1"]::after {
		mask-image: url(assets/icon-expression-connected.svg);
	}

	> [slot="output"][data-statement="1"][data-connected="1"]::after {
		mask-image: url(assets/icon-output-statement-connected.svg);
	}

	> [slot="output"][data-statement="1"]::after {
		mask-image: url(assets/icon-output-statement.svg);
	}
}
</style>
<template>
	<style>
		:host {
			position: absolute;
		}
		.card {
			width: max-content;
			min-width: 200px;
			/*height: 220px;*/
			background-color: #222;
			border-radius: 10px;
			/*box-shadow: 16px 16px 10px black;*/
			color: white;
			/*--title-display: flex;*/
		}
		.title {
			height: 30px;
			border-radius: 10px 10px 0 0;
			background: linear-gradient(to right top, #84fab0 10%, #8fd3f4);

			display: flex;
			justify-content: center;
			align-items: center;

			cursor: grab;
			user-select: none;
		}
		.title:active {
			cursor: grabbing;
		}
		:host([data-title="0"]) :is(.title, .title + .close) {
			display: none;
		}
		.close {
			display: flex;
			justify-content: center;
			align-items: center;
			width: 20px;
			height: 20px;
			position: absolute;
			top:5px;
			right: 5px;
			user-select: none;
		}

		.close:hover {
			outline: 1px solid black;
		}
		.body{
			display: flex;
			justify-content: space-between;
			gap: 2em;
			padding-block: 10px;
		}

		.left, .right {
			display: flex;
			flex-direction: column;
			gap:20px;
		}
		.right {
			align-items: end;
		}
	</style>
	<div class="card">
		<slot class="title" name="title"></slot>
		<div class="close">Ã—</div>
		<div class="body">
			<slot class="left" name="input"></slot>
			<slot class="right" name="output"></slot>
		</div>
	</div>
</template>
`;

const parser = new DOMParser();
const dom = parser.parseFromString(text, 'text/html');
document.head.appendChild(dom.querySelector('style'));
const template = dom.querySelector('template');

customElements.define("blueprint-block", class extends HTMLElement{
	constructor(){
		super();
		const shadowRoot = this.attachShadow({mode:'open'});
		shadowRoot.appendChild(template.content.cloneNode(true));
	}
});