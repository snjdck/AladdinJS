"use strict";

const TextureMaterial = require("./TextureMaterial");

class TextureHitTestMaterial extends TextureMaterial{
	constructor(texture){
		super(texture);
		this.shader = "shader3d&pick";
	}

	onActiveState(gl){
		gl.enable(gl.DEPTH_TEST);
		gl.depthMask(true);
		gl.depthFunc(gl.LEQUAL);
		gl.disable(gl.BLEND);
	}

	onActiveUniform(gl, camera, program){
		super.onActiveUniform(gl, camera, program);
		this.uidLocation = gl.getUniformLocation(program, "uid");
	}

	onDraw(gl, drawUnit){
		gl.uniform1i(this.uidLocation, drawUnit.uid);
		super.onDraw(gl, drawUnit);
	}
}

module.exports = TextureHitTestMaterial;