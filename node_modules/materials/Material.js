"use strict";

const batchDraw = require("../renderers/batchDraw");

class Material{
	constructor(shader){
		this.shader = shader;
		this.isPickMode = false;
		this.addressInstanceID = 0;
	}
	draw(gl, context, drawUnitList){
		let {uniformBuffer} = gl.render3d;
		let {vao} = context;
		uniformBuffer.registerCount = vao.boneCount;
		let instanceCountPerDraw = Math.floor(100 / vao.boneCount);
		let drawCount = batchDraw(gl, vao, uniformBuffer, drawUnitList, instanceCountPerDraw, this.onDraw, this.isPickMode, this.addressInstanceID);
		gl.profileMgr.profile3d.drawCount += drawCount;
	}
	onUpdate(timeElapsed){}
	onActiveState(gl){}
	onActiveUniform(gl, camera, program){}
	onActiveVAO(gl, vao){}
	onDraw(uniformBuffer, drawUnit, index){}
}

module.exports = Material;