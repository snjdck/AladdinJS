"use strict";

class AnimationTrack
{
	constructor(keyFrameList){
		this.keyFrameList = keyFrameList;
	}

	calcTransform(time, result){
		let {keyFrameList} = this;
		for(let i=keyFrameList.length-1; i>=0; --i){
			let keyFrame = keyFrameList[i];
			if(time > keyFrame.time){
				let nextKeyFrame = keyFrameList[i+1];
				if(nextKeyFrame){
					let factor = (time - keyFrame.time) / (nextKeyFrame.time - keyFrame.time);
					keyFrame.interpolate(nextKeyFrame, factor, result);
				}else{
					result.copyFrom(keyFrame);
				}
				return;
			}
			if(time == keyFrame.time){
				result.copyFrom(keyFrame);
				return;
			}
		}
	}
}

module.exports = AnimationTrack;