'use strict';

function calcCount(value, key='prev'){
	let count = 0;
	while(value){
		++count;
		value = value[key];
	}
	return count;
}

function collect(value, key='prev'){
	let result = [];
	while(value){
		result.push(value)
		value = value[key];
	}
	return result;
}

class Queue
{
	constructor(){
		this.head = this.tail = null;
	}

	push(value){
		const {tail} = this;
		if(tail){
			tail.next = this.tail = {value};
		}else{
			this.head = this.tail = {value};
		}
	}

	shift(){
		const {value, next} = this.head;
		this.head = next;
		if(!next){
			this.tail = null;
		}
		return value;
	}
}

exports.calcCount = calcCount;
exports.collect = collect;
exports.Queue = Queue;
