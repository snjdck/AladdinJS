const f0 = (monthRate, numMonth) => monthRate + monthRate / ((1 + monthRate) ** numMonth - 1);
const f1 = (v, numMonth) => f0((v * 0.01 + 1) * 0.049 / 12, numMonth);

function calc0(numYear, interestRate, justInterestFlag=true){
	const numMonth = numYear * 12;
	const value = interestRate + (justInterestFlag ? 1 / numMonth : 0);
	let i = -30;
	let a = f1(i, numMonth);
	if(value < a)return -100;
	for(;;++i){
		let b = f1(i+1, numMonth);
		if(a <= value && value < b)
			return i;
		a = b;
	}
}

const calc1 = (numYear, interestRate) => calc0(numYear, interestRate, interestRate * numYear * 12 < 1);
const calc = (numYear, total, interest) => console.log(total.toString().padStart(2) + '万', numYear + '年', interest.toString().padStart(10) + '月供', '上浮' + calc1(numYear, interest / total * 0.0001) + '%');

calc(8, 17, 556);
calc(5,  8, 256);
calc(8, 18, 459.38);
calc(8, 17, 2195);
calc(8, 17, 2203);
calc(8, 17, 2303.25);
calc(5, 15, 3112.5);
