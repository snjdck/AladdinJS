'use strict';
/* 时间序列分析之指数平滑法 */

/* 0 <= a <= 1 */
function smooth1(a, init){
	const f = (s => x => s = a * x + (1 - a) * s)(init[0]);
	for(let i=1, n=init.length; i<n; ++i)f(init[i]);
	return f;
}

function smooth2(a, b, h, init){
	const f = ((s, t) => x => {
		const _s = s;
		s = a * x + (1 - a) * (s + t);
		t = b * (s - _s) + (1 - b) * t;
		return s + t * h;
	})(init[1], init[1] - init[0]);
	for(let i=2, n=init.length; i<n; ++i)f(init[i]);
	return f;
}

exports.smooth1 = smooth1;
exports.smooth2 = smooth2;
