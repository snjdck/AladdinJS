'use strict';
/*
0xxxxxxx 7bit 兼容ASCII码
110xxxxx 10xxxxxx 11bit
1110xxxx 10xxxxxx 10xxxxxx 16bit 汉字所在
11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 21bit
*/
const Converter = (list=[]) => data => {
	if(data.length <= 0)return;
	const n = list.push(...data);
	let i = 0;
	for(; i<n; ++i){
		const v = list[i];
		if((v & 0xE0) == 0xC0){
			if(i + 1 >= n)break;
			i += 1;
			continue;
		}
		if((v & 0xF0) == 0xE0){
			if(i + 2 >= n)break;
			i += 2;
			continue;
		}
		if((v & 0xF8) == 0xF0){
			if(i + 3 >= n)break;
			i += 3;
			continue;
		}
	}
	if(i <= 0)return;
	return Buffer.from(list.splice(0, i)).toString();
}

module.exports = Converter;
