"use strict";

class GuardValue
{
	constructor(){
		this.clear();
	}
	
	clear(){
		this.isDirty = false;
		this.valueToSet = null;
	}

	valueOf(){
		return this.valueToSet;
	}
	
	getValue(oldValue){
		return this.isDirty ? this.valueToSet : oldValue;
	}
	
	setValue(newValue, oldValue){
		if(this.isDirty){
			if(newValue == oldValue){
				this.clear();
			}else if(newValue != this.valueToSet){
				this.valueToSet = newValue;
			}
		}else if(newValue != oldValue){
			this.isDirty = true;
			this.valueToSet = newValue;
		}
	}
}

module.exports = GuardValue;