import chainSet from 'utils/chain/set';

function createSelector(...selectors){
	const resultFn = selectors.pop();
	return (...args) => resultFn(...selectors.map(fn => fn(...args)));
}

function createMapSelector(selectors){
	const keys = Object.keys(selectors);
	return createSelector(
		...keys.map(k => selectors[k]),
		(...args) => args.reduce((map, v, i) => chainSet(map, keys[i], v), {})
	);
}

export {
	createSelector,
	createMapSelector
};