'use strict';

function deferBunchDo(handler){
	const taskList = [];
	const enqueue = task => taskList.push(task);
	const execute = (...args) => {
		if(taskList.length <= 0)return;
		handler(taskList, ...args);
		taskList.length = 0;
	}
	return [enqueue, execute];
}

const deferDo = function(){
	const call = fn => fn();
	const handler = taskList => taskList.forEach(call);
	return () => deferBunchDo(handler);
}();

exports.deferDo = deferDo;
exports.deferBunchDo = deferBunchDo;
