//1- 8-23
//1-11-52

const calc = (list, epsilon) => list.reduce((r, v, i) => r + v * epsilon[i], 1);

const readFloat32 = (epsilon => buffer => {
	let t = buffer[1] >> 7;
	let S = (buffer[0] >> 7) ? -1 : 1;
	let E = ((buffer[0] & 0x7F) << 1) - 127;
	let M = calc(buffer.slice(1, 4), epsilon);
	return S * (M - t) * 2 ** (E + t);
})([2 ** -7, 2 ** -15, 2 ** -23]);

const readFloat64 = (epsilon => buffer => {
	let t = buffer[1] >> 4;
	let S = (buffer[0] >> 7) ? -1 : 1;
	let E = ((buffer[0] & 0x7F) << 4) - 1023;
	let M = calc(buffer.slice(1, 8), epsilon);
	return S * (M - t) * 2 ** (E + t);
})([2 ** -4, 2 ** -12, 2 ** -20, 2 ** -28, 2 ** -36, 2 ** -44, 2 ** -52]);

console.log(readFloat32(Buffer.from([0x40, 0xF0, 0, 0])) == 7.5);
console.log(readFloat64(Buffer.from([0x40, 0x1E, 0, 0, 0, 0, 0, 0])) == 7.5);