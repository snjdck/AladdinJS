'use strict';

const isNodeEnv = require('./isNodeEnv');

let bin2hex, hex2bin, str2hex, hex2str;

if(isNodeEnv()){
	bin2hex = v => v.toString('hex');
	hex2bin = v => Buffer.from(v, 'hex');

	str2hex = v => bin2hex(Buffer.from(v));
	hex2str = v => hex2bin(v).toString();
}else{
	bin2hex = (num2str => v => Array.from(v, num2str).join(''))(v => v.toString(16).padStart(2, '0'));
	hex2bin = (str2num => v => Uint8Array.from(v.match(/\w{2}/g), str2num))(v => parseInt(v, 16));

	str2hex = (encoder => v => bin2hex(encoder.encode(v)))(new TextEncoder());
	hex2str = (decoder => v => decoder.decode(hex2bin(v)))(new TextDecoder());
}

exports.bin2hex = bin2hex;
exports.hex2bin = hex2bin;
exports.str2hex = str2hex;
exports.hex2str = hex2str;
