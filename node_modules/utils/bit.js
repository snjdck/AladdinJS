
function cast(byteList, bitCountPerByte, bitOffset=0){
	const threshold = 1 << bitCountPerByte;
	let string = byteList.map(v => {
		if(v >= threshold)
			return v.toString(2).slice(-bitCountPerByte);
		return v.toString(2).padStart(bitCountPerByte, '0');
	}).join('');
	if(bitOffset > 0){
		string = '0'.repeat(bitOffset) + string;
	}
	let count = Math.ceil(string.length / 8);
	let data = Array(count);
	for(let i=0; i<count; ++i){
		data[i] = parseInt(string.substr(i << 3, 8), 2);
	}
	return data;
}

exports.cast = cast;