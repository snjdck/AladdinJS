'use strict';

const listen1 = (target, event) => callback => target.once(event, callback);
const listen2 = (target, event) => {
	let waitCount = 0;
	return callback => {
		let count = waitCount++;
		target.on(event, function fn(v){
			if(count > 0)return count--;
			waitCount--;
			target.off(event, fn);
			callback(v);
		});
	}
}
const listen = (target, event) => {
	const waitList = [];
	target.on(event, v => waitList.shift()(v));
	return callback => waitList.push(callback);
}

exports.listenFIFO = listen;
