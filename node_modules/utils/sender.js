'use strict';

const limitSend = (sendFn, limit=20) => async data => {
	if(data.byteLength <= limit)return sendFn(data);
	let begin = 0;
	do{
		const end = begin + limit;
		await sendFn(data.slice(begin, end));
		begin = end;
	}while(data.byteLength - begin > limit);
	return sendFn(data.slice(begin));
}

exports.limitSend = limitSend;
