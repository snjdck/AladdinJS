'use strict';

const limitSend = (sendFn, limit=20) => async data => {
	if(data.byteLength <= limit)return sendFn(data);
	let offset = 0;
	do{
		await sendFn(data.slice(offset, offset + limit));
		offset += limit;
	}while(data.byteLength - offset > limit);
	return sendFn(data.slice(offset));
}

exports.limitSend = limitSend;
