'use strict';

const bool = () => Math.random() < 0.5;
const sign = () => bool() ? 1 : -1;
const rangeFloat = (a, b) => a + (b - a) * Math.random();
const rangeInt = (a, b) => Math.floor(rangeFloat(Math.ceil(a), Math.floor(b)));

function arrayItem(list, removeFlag=false){
	let index = Math.floor(list.length * Math.random());
	if(removeFlag){
		return list.splice(index, 1)[0];
	}
	return list[index];
}

function arrayIndexes(length, count=1, repeatFlag=true){
	let result = [];
	if(repeatFlag){
		while(result.length < count){
			result.push(Math.floor(length * Math.random()));
		}
	}else{
		let indexList = [];
		for(let i=0; i<length; ++i){
			indexList[i] = i;
		}
		if(count > length){
			count = length;
		}
		while(result.length < count){
			result.push(arrayItem(indexList, true));
		}
	}
	return result;
}

function arrayItems(list, count=1, repeatFlag=true){
	let indexList = arrayIndexes(list.length, count, repeatFlag);
	return indexList.map(index => list[index]);
}

const randomGen = seed => value => {
	seed = (seed * 9301 + 49297) % 233280;
	return Math.floor(value * seed / 233280);
}

module.exports = {
	bool,
	sign,
	rangeFloat,
	rangeInt,
	arrayItem,
	arrayIndexes,
	arrayItems,
	randomGen,
};
