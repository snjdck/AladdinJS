'use strict';
//FileReader

const fetchFile = url => fetch(url).then(response => response.arrayBuffer());

async function loadFileList(options){
	const handlerList = await window.showOpenFilePicker(options);
	const fileList = await Promise.all(handlerList.map(handler => handler.getFile()));
	//const dataList = await Promise.all(fileList.map(file => file[type]()));//arrayBuffer or text
	return fileList;
}

async function saveFile(options, data){
	const handler = await window.showSaveFilePicker(options);
	const stream = await handler.createWritable();
	await stream.write(data);
	await stream.close();
}

async function openDirectory(){
	const handler = await window.showDirectoryPicker();
	return handler;
}

export.fetchFile = fetchFile;
export.saveFile = saveFile;
