'use strict';

function tickByFrame(onUpdate, stopTest){
	requestAnimationFrame(function(){
		let now = performance.now();
		return function fn(timestamp){
			if(stopTest?.())return;
			requestAnimationFrame(fn);
			const timeElapsed = timestamp - now;
			now = timestamp;
			onUpdate(timeElapsed, timestamp);
		}
	}());
}

exports.tickByFrame = tickByFrame;
