
function createCanvasContext(width, height){
	const canvas = document.createElement('canvas');
	canvas.width = width;
	canvas.height = height;
	const context = canvas.getContext('2d');
	context.fillStyle = '#FFFFFF';
	context.strokeStyle = 'green';
	context.textBaseline = 'ideographic';//bottom,top
	/*
	canvas.setAttribute('style', 'position: absolute;left: 0;');
	document.body.appendChild(canvas)
	context.fillText("你好,world", 100, 30);
	//*/
	return context;
}

const getImageJpegData = function(){
	const canvas = document.createElement('canvas');
	const context = canvas.getContext('2d', {alpha:true, colorSpace:'srgb', desynchronized:true, willReadFrequently:true});
	return image => {
		const {naturalWidth:width, naturalHeight:height} = image;
		if(canvas.width != width)canvas.width = width;
		if(canvas.height != height)canvas.height = height;
		context.drawImage(image, 0, 0);
		return context.getImageData(0, 0, width, height);
	}
}();

exports.createCanvasContext = createCanvasContext;
exports.getImageJpegData = getImageJpegData;
