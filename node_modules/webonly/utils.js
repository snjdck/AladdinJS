
const fetchArrayBuffer = function(){
	const cast = response => response.arrayBuffer();
	return path => fetch(path).then(cast);
}();

const backgroundDo = function(){
	const priority = {priority: 'background'};
	return task => scheduler.postTask(task, priority);
}();

const loadImage = async path => {
	const image = new Image();
	image.decoding = 'async';
	image.src = path;
	await image.decode();
	return image;
}

exports.fetchArrayBuffer = fetchArrayBuffer;
exports.backgroundDo = backgroundDo;
exports.loadImage = loadImage;
