'use strict';

function idleDo(handler){
	const itemSet = new Set();
	function callback(){
		handler(itemSet);
		itemSet.clear();
	}
	return function(item){
		if(itemSet.size <= 0){
			requestIdleCallback(callback);
		}
		itemSet.add(item);
	}
}

module.exports = idleDo;
