'use strict';

/*
reillyeon.github.io/serial/
option = {filters:[{usbVendorId,usbProductId}]}
//*/
function requestPort(option){
	const {serial} = navigator;
	return serial.requestPort(option).catch(error => {
		if(error instanceof DOMException){
			if(error.code == DOMException.NOT_FOUND_ERR){
				return;//user cancel select
			}
		}
		throw error;
	});
}

async function setResetSignal(serialPort){
	await serialPort.setSignals({dataTerminalReady:false});
	await serialPort.setSignals({dataTerminalReady:true});
}

exports.requestPort = requestPort;
exports.setResetSignal = setResetSignal;
