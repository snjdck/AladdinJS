const Matrix3D = require("Matrix3D");

const DisplayObjectContainer3D = require("./DisplayObjectContainer3D");
const DrawUnitCollector = require("./DrawUnitCollector");

class Scene3D
{
	constructor(){
		this.root = new DisplayObjectContainer3D();
		this.drawUnitCollector = new DrawUnitCollector();
	}

	update(timeElapsed){
		this.root.onUpdate(timeElapsed);
	}

	draw(gl, mode){
		const {root, drawUnitCollector} = this;
		gl.render3d.drawBegin(mode);
		drawUnitCollector.clear();
		root.collectDrawUnits(drawUnitCollector, gl, mode);
		drawUnitCollector.draw(gl);
	}
}

module.exports = Scene3D;