'use strict';

const {composeFactory} = require('../net/packet');
module.exports = concatFn => composeFactory(
	concatFn,
	buffer => buffer.length >= 6 && buffer[buffer.length-2] == 0xA && buffer[2] == buffer.length,
	buffer => {
		switch(buffer[3]){
			case 1: return buffer[4];
			case 2: return buffer[4] << 8 | buffer[5];
			case 3: return buffer.slice(4, buffer[2]-2);
		}
	}
);
