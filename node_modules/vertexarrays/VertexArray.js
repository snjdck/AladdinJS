"use strict";

class VertexArray{
	active(gl){
		gl.bindVertexArray(this.vao || this.createVertexArray(gl));
		this.onActive(gl);
	}

	dispose(){
		if(!this.vao)return;
		let {gl} = this;
		this.onDispose(gl);
		gl.deleteVertexArray(this.vao);
		this.vao = null;
	}

	createVertexArray(gl){
		this.gl = gl;
		this.vao = gl.createVertexArray();
		gl.bindVertexArray(this.vao);
		this.onCreate(gl);
		gl.bindVertexArray(null);
		return this.vao;
	}

	uploadUniformData(uniformData){
		let {gl} = this;
		gl.bufferData(gl.UNIFORM_BUFFER, uniformData, gl.DYNAMIC_DRAW);
	}

	onActive(gl){}
	onCreate(gl){}
	onDispose(gl){}
}

module.exports = VertexArray;