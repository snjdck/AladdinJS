'use strict';

const composeFactory = (concatFn, checkFn, valueFn) => (...args) => data => {
	concatFn(data, ...args);
	if(!checkFn(...args))return false;
	return valueFn ? valueFn(...args) : args[0];
}

function listenData(target, evtType, checker, handler){
	target.addEventListener(evtType, function callback(evt){
		const result = checker(evt);
		if(!result)return;
		target.removeEventListener(evtType, callback);
		handler(result);
	});
}

exports.composeFactory = composeFactory;
exports.listenData = listenData;
