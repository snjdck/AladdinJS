
function encode(value){
	const result = [];
	while(value > 0x7F){
		result.push(0x80 | value & 0x7F);
		value >>= 7;
	}
	result.push(value & 0x7F);
	return result;
}

function decode(buffer, offset=0){
	let count = 0;
	let value = 0;
	for(let i=0; i<4; ++i){
		const index = offset + i;
		if(index >= buffer.length)return;
		++count;
		const byte = buffer[index];
		value |= (byte & 0x7F) << 7 * i;
		if(byte <= 0x7F)break;
	}
	return {count, value};
}

exports.encode = encode;
exports.decode = decode;