"use strict";

const SQRT6 = Math.sqrt(6);

class ViewFrustum
{
	constructor(){
		this.planeList = [];
	}
	
	addPlane(plane){
		this.planeList.push(plane);
	}
	
	classifyBox(aabb){
		var otherCenter = aabb._center;
		
		var fx = center.x - otherCenter.x;
		var fy = center.y - otherCenter.y;
		
		var tx = aabb.halfSizeX + aabb.halfSizeY;
		var dx = Math.abs(fx - fy) - projectSizeX;
		if (dx >= tx) return ClassifyResult.OUTSIDE;

		var fz = center.z - otherCenter.z;
		var ty = tx + aabb.halfSizeZ * SQRT6;
		var dy = Math.abs(fx + fy - fz * SQRT6) - projectSizeY;
		if (dy >= ty) return ClassifyResult.OUTSIDE;

		return (-dx >= tx && -dy >= ty) ? ClassifyResult.CONTAINS : ClassifyResult.INTERSECT;
	}
	
	classify(bound){
		return bound.onClassify(this);
	}
	
	hitTest(bound){
		return bound.onHitTest(this);
	}
	
	hitTestBox(bound){
		return classifyBox(bound) <= 0;
	}
}

module.exports = ViewFrustum;