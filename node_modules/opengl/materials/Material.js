'use strict';

const WebGL = require('../WebGL');
const {Opaque, Transparent} = require('../const/MaterialRenderGroup');

class Material
{
	//onUpdate(){}
	//onDraw(drawUnit, index, batchIndex){}
	get group(){
		return this._group || (this._group = this.renderState.isTransparent() ? Transparent : Opaque);
	}
}

Material.order = 0;
Material.bindTexture = (gl, texture) => gl.bindTexture(gl.TEXTURE_2D, texture);
Material.onDrawBatch = function(drawUnitList, offset, instanceCount, batchIndex){
	for(let i=0; i<instanceCount; ++i){
		let drawUnit = drawUnitList[offset+i];
		drawUnit.material.onDraw(drawUnit, i, batchIndex);
	}
}

module.exports = Material;
