'use strict';

const WebGL = require('../WebGL');

class Material{
	isTransparent(){return false;}
	//onUpdate(){}
	//onDraw(drawUnit, index, batchIndex){}
	get group(){
		let value = this._group;
		if(typeof value != 'number'){
			value = this.renderState.isOpaque() ? 0 : 1;
		}
		return value;
	}
}

Material.order = 0;
Material.bindTexture = (gl, texture) => gl.bindTexture(gl.TEXTURE_2D, texture);
Material.onDrawBatch = function(drawUnitList, offset, instanceCount, batchIndex){
	for(let i=0; i<instanceCount; ++i){
		let drawUnit = drawUnitList[offset+i];
		drawUnit.material.onDraw(drawUnit, i, batchIndex);
	}
}

module.exports = Material;
