"use strict";

const batchDraw = require("../renderers/batchDraw");
const WebGL = require('../WebGL');

class Material{
	constructor(shader){
		this.shader = shader;
		this.isPickMode = false;
		this.addressInstanceID = 0;
	}
	draw(context, drawUnitList){
		let {render3d, profileMgr} = WebGL;
		let {uniformBuffer} = render3d;
		let {vao} = context;
		uniformBuffer.registerCount = vao.boneCount;
		let drawCount = batchDraw(vao, uniformBuffer, drawUnitList, this.onDraw, this.isPickMode, this.addressInstanceID);
		profileMgr.profile3d.drawCount += drawCount;
	}
	isTransparent(){return false;}
	onUpdate(){}
	onActiveUniform(camera, program){}
	onActiveVAO(drawUnit){}
	onDraw(uniformBuffer, drawUnit, index){}
}

module.exports = Material;