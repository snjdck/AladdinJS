"use strict";

const DisplayObject3D = require("./DisplayObject3D");
const Camera3D = require("./cameras/Camera3D");

class Scene3D
{
	constructor(){
		this.root = new DisplayObject3D();
		this.collectCameras = this.collectCameras.bind(this);
		this.cameraList = [];
	}

	update(timeElapsed){
		this.root.onUpdate(timeElapsed);
	}

	draw(gl, mode){
		const {root, cameraList} = this;
		root.forEach(this.collectCameras);
		while(cameraList.length > 0){
			let camera = cameraList.pop();
			camera.render(root, gl, mode);
		}
	}

	collectCameras(node){
		if(node instanceof Camera3D){
			this.cameraList.push(node);
		}
	}
}

module.exports = Scene3D;